1  Быстрый старт с Postman

1.1 Что такое Postman?

Основное назначение Postman - облегчить разработку, тестирование и документирование API. С его помощью можно отправить данные в запросе и проверить полученный ответ.
Также у него есть много других интересных возможностей. Можно например сохранять запросы в папки и коллекции, удобно параметризовывать запросы. Запускать коллекции с
помощью Collection Runner и использовать их как автоматизированные тесты. Postman позволяет проектировать дизайн API и создавать на его основе Mock-сервер.

Тестировщики, с помощью Postman могут отправлять HTTP/HTTPS запросы к сервисам и получать ответы от них. С помощью такого подхода можно протестировать бэкенд сервисы и
убедиться, что они работают корректно. С помощью Postman можно выполнять запросы к различным API, таким как REST, SOAP и GraphQL.

Postman - это сейчас достаточно популярный инструмент, который использует в работе много людей. У него есть большое сообщество, в котором в случае необходимости можно
будет найти ответы на появившиеся вопросы.

1.2 Установка

Для установки под Windows:  

  - Загрузите последнюю версию Postman.
  - Запустите .exe файл для установки.
  - После окончания процесса установки потребуется зарегистрироваться. Для простоты можно выбрать вариант регистрации с помощью существующего google аккаунта.

Также у Postman есть web версия, которая работает прямо в браузере. Она доступна по этой ссылке. На данный момент эта версия находится в процессе доработок, поэтому
часть возможностей настольной версии там недоступна

1.3 Основные элементы интерфейса Postman

Окно приложения состоит из верхнего, нижнего  и бокового меню, а также основной зоны работы.

Верхнее меню дает возможность создания рабочего пространства (Workspaces) и доступа к различным api (API Network). Также с его помощью можно делать поиск.
Home - содержит вашу домашнюю страницу. На ней можно посмотреть вашу недавнюю активность.
С помощью Workspaces - можно создать новое рабочее пространство, выбрать одно из недавно посещенных, либо сделать поиск по существующим.

В боковом меню доступны основные функциональные элементы Postman. В истории (History) вы можете увидеть сделанные ранее запросы. Для более удобного хранения, группировки и поиска таких запросов в Postman есть коллекции (Collections). Если у вас небольшой экран, для удобной работы можно свернуть боковое меню с помощью кнопки в нижнем левом углу.

Большая часть вашей работы в Postman будет проходить в основной рабочей зоне. Основные её части - вкладки, выпадающий список для выбора окружения и правое боковое меню. Вкладки нам нужны, для лучшей организации работы с запросами. Здесь Postman сделан по тому же принципу, что и браузеры, где новую странице удобнее открывать в новой вкладке

1.4 Ручное тестирование api с Postman. Отправка первого запроса

Основная функциональность Postman - возможность создания и отправки запросов к API для проверки его функциональности и получения данных. Для этого не потребуется
писать код или команды в терминале. В интерфейсе Postman вы создаете запрос, нажимаете кнопку отправить и получаете ответ от API. API расшифровывается как Application
Programming Interface или программный интерфейс приложения. С его помощью мы можем  получить доступ к возможностям другого приложения и обмениваться с ним данными.
Такое приложение называется API сервером. Отправка запросов и получение ответов происходит через интернет с помощью протокола HTTP. Приложение, которое отправляет
запрос, называется клиентом. Это может быть мобильное приложение, web сайт или другой сервис.

Запрос всегда содержит URL вызываемого эндпоинта API и HTTP метод запроса. Наиболее часто используются следующие методы:

POST - для добавления новых данных
GET - для чтения данных
PUT - для обновления данных
PATCH - для частичного обновления данных
DELETE - для удаления данных

Как будет выглядеть GET запрос из демонстрационного API Postman:  GET https://postman-echo.com/get

Для отправки в Postman выбираем метод GET. Копируем адрес нашего эндпоинта и нажимаем кнопку Send. В результате получаем ответ содержащий данные в виде json объекта.

В ответе мы можем увидеть тело ответа (Body), который мы получили от сервера. Postman автоматически распознает формат JSON и форматирует его, для лучшего восприятия.
Помимо Body, мы можем посмотреть куки (Cookies) и заголовки (Headers) ответа, нажав на соответствующие ссылки. Также мы видим, что наш запрос выполнился успешно и в
ответе мы получили код ответа 200 OK. На выполнение запроса ушло 148мс



2  Работа с запросами и ответами в Postman

2.1 Основные запросы

Запрос может содержать различную информацию, которая определяет какие данные Postman отправит при взаимодействии с API. Обязательно нужно указать метод запроса и его
URL. С их помощью определяется API эндпоинт, с которым Postman будет взаимодействовать. Для начала давайте попробуем отправить пять основных типов запросов.

Создадим новый запрос, для этого можно в верхнем меню выбрать New > HTTP Request, либо нажать + и создать новую вкладку.

GET запрос. Обычно такой тип запросов используется для чтения данных.

GET https://postman-echo.com/get

Метод GET у нас уже выбран по умолчанию. Осталось указать URL нашего API. После того, как мы начнем вводить его, Postman в выпадающем списке покажет нам ранее введенные адреса. В данном примере наш url состоит из двух частей. 

Первая из них базовый(base) url - это https://postman-echo.com. Она состоит из протокола https. Здесь чаще всего будет использоваться либо https, либо http протокол.
Затем идёт host, представленный доменным именем postman-echo.com. Вместо него также может быть использован ip адрес хоста. И затем идет неявно указанный порт, в нашем
случае это 443. Если используется протокол http, порт по умолчанию будет 80. Если порт отличается от используемых по умолчанию, потребуется явно указать его через
двоеточие. 

Вторая часть это путь(path) запроса. Он находится сразу после base url.

После ввода URL мы можем отправить запрос. Для этого нужно нажать кнопку Send. Через некоторое время после этого в нижней части главного окна мы увидим ответ от сервера

Запрос с path параметрами

Это параметры которые являются частью пути запроса. В документации к api такие параметры часто задаются в фигурных скобках. В Postman для добавления такого параметра в запрос, нужно указать двоеточие перед его именем.

GET https://postman-echo.com/delay/:delay

После этого на вкладке Params, в таблице path параметров можно будет задать его значение

POST запрос с query параметрами

POST запрос. Такой тип запросов обычно используется чтобы добавить данные.

POST https://postman-echo.com/post?name=anna

Для его отправки надо выбрать соответствующий тип в выпадающем списке, слева от url адреса. Еще в отличии от предыдущего, этот запрос содержит параметры строки запроса
или query параметры. От основной части url они отделяются знаком вопроса, а между собой знаком амперсанда.

Если ввести такой параметр в строке запроса, он автоматически появится на вкладке Params. Если добавить его на вкладке, тогда он появится в строке запроса. Еще на этой
вкладке у каждого параметра есть поле description. В нем можно добавить описание к каждому из указанных параметров. Для краткости столбцы value и description можно
скрыть. Для этого нужно нажать кнопку View more actions и выбрать только нужные поля. 

Есть еще один способ ввода параметров - Bulk Edit. Он удобен, если вам требуется указать большое количество параметров. Для его использования нужно нажать
соответствующую кнопку. В открывшемся окне можно вводить параметры. Каждый параметр вводится в новой строке. Имя и значение параметра разделяются двоеточием. Например
ранее введенный нами параметр будет выглядеть таким образом: name:anna

2.2 Передача параметров в теле запроса

Иногда в запросе может потребоваться отправить больший объем данных чем пара ключ и значение. Например вы хотите добавить нового пользователя. Информация о нем
представлена в виде XML или Json. Будет не очень удобно передавать ее в виде path или query параметров. Для таких случаев используется передача параметров в теле
запроса. Обычно такой способ применяется с POST, PUT и PATCH запросами.

В Postman, на вкладке body вы можете задать нужные данные, которые будут отправлены вместе с запросом. Там же можно выбрать тип отправляемых данных. По умолчанию
Postman для тела запроса использует тип none.

Если вы планируете отправлять данные в теле запроса необходимо убедиться, что добавлен правильный заголовок content-type. Он нужен для того, чтобы api мог корректно
обработать полученный запрос.

Для типов form-data и x-www-form-urlencoded Postman автоматически добавит в заголовки нужный content-type. Если вы планируете использовать тип raw, Postman добавит
заголовок на основе выбранного вами типа (например json или text). Для типа binary Postman не будет добавлять никаких заголовков. Заданный вручную заголовок content
type переопределяет значение, указанное Postman

Форматы form-data, url-encoded и binary

Формат form-data. Он позволяет отправлять данные в формате пар ключ-значение. Используемый content-type, который Postman сам добавит в заголовки:
multipart/form-data, к которому динамически добавляется граница(boundary) генерируемая во время отправки запроса. Такой тип передачи данных часто используется при
отправки данных формы на сайтах. Еще с помощью формата form-data можно передавать файлы. Для этого в выпадающем меню нужно выбрать file и загрузить нужный нажав на
кнопку Select Files.

Формат x-www-form-urlencoded внешне очень похож на form-data. Здесь данные также передаются в формате ключ-значение, но отсутствует возможность передавать файлы.
Заголовок content-type, который Postman добавит автоматически будет иметь значение: application/x-www-form-urlencoded.

Формат binary. Он предназначен для отправки бинарных данных. Обычно к ним относятся различные файлы: картинки, аудио, видео и также текстовые файлы. Такие данные
тяжело вручную добавить в запрос, поэтому в Postman это делается с помощью диалога загрузки файла

PUT запрос и raw формат

PUT запрос. Такой тип запросов обычно используется для обновления данных.

PUT https://postman-echo.com/put

В теле запроса можно передавать текстовые данные, различных форматов. Для этого используется вариант передачи данных: raw. В выпадающем меню можно выбрать формат
передаваемых данных. Доступные форматы: Text, JavaScript, JSON, HTML и XML. 

Для данных в формате JSON и XML появляется кнопка Beautify. С ее помощью можно переформатировать текстовые данные для красивого отображения в окне ввода

PATCH запрос

PATCH запросы обычно используются для частичного обновления данных.

PATCH https://postman-echo.com/patch

Снова выберем вкладку raw. В зависимости от выбранного формата, Postman включит подсветку синтаксиса в окне ввода и добавит нужный заголовок content-type. Он будет
иметь следующие значения:

Text - text/plain
JavaScript - application/javascript
JSON - application/json
HTML - text/html
XML - application/xml

При необходимости вы сможете переопределить его на вкладке headers

DELETE запрос

DELETE запрос. Такой тип запросов как правило используется для удаления данных.

DELETE https://postman-echo.com/delete

Для его отправки надо выбрать соответствующий тип в выпадающем списке, слева от url адреса.

На вкладке Headers при необходимости можно добавить заголовки запроса. Сейчас там находится 8 заголовков, которые Postman добавил в запрос автоматически

2.3 Работа с ответами

В Postman есть возможность визуализации тела ответа, а также проверки его корректности. Основные части ответа - это код ответа, заголовки и тело ответа

Тело ответа

В Postman тело ответа мы можем посмотреть в нижней части главного экрана, на вкладке body. Она предоставляет несколько инструментов, которые помогут эффективнее
работать с ответами от api. Это 4 вида представления тела ответа: Pretty, Raw, Preview и Visualize. В первых двух доступна функция поиска в запросе. Для открытия окна
поиска нужно будет выбрать иконку поиска или нажать сочетание клавиш ⌘+F или Ctrl+F. В Postman доступен автоматический показ изображений в теле ответа, если он
содержит соответствующий заголовок content-type.

Форматированный(Pretty) вид - представление тела запроса для форматов JSON и XML. Этот вид автоматически форматирует полученный ответ для более легкого восприятия. Применяется удобная подсветка различных частей текста.

Postman делает форматирование автоматически, на основе пришедшего заголовка content-type. Для принудительного изменения форматирования, можно воспользоваться выпадающим списком для выбора иного формата, рядом с кнопкой Visualize.

Если вы работаете только с форматом Json, можно выставить принудительное форматирование в этом формате. Для этого в верхнем меню нужно выбрать раздел настроек (Settings). На вкладке General найти настройку определения языка (Language detection). Затем поменять ее значение с Auto на Json.

Неформатированный (Raw) вид - текстовое представление тела запроса, без дополнительного форматирования. Позволяет просмотреть его в полученном виде.

Предпросмотр (Preview) - этот вид позволяет удобно просматривать полученное содержимое в обработанном виде. Это может быть удобно например в случае получения стандартных ошибок, которые приходят в виде Html страницы.

Для бинарных типов данных в ответах, таких как аудио файлы, pdf документы, zip архивы или что-то другое вы можете воспользоваться кнопкой Send and download, чтобы сохранить ответ и проверить его локально на своем компьютере.

Визуализация (Visualize) - позволяет обработать полученный ответ собственным способом. Код для визуализации добавляется отдельно.

Заголовки и cookies

На вкладке Cookies можно просмотреть все куки отправленные сервером. Каждая запись будет содержать имя, значение, домен и путь, а также дополнительную информацию.

На вкладке headers отображается информация о полученных заголовках, в формате ключ-значение. Если навести мышку на иконку информации, в поле с именем заголовка, можно получить информацию о каждом из них, в соответствии со спецификацией протокола HTTP.

В случае отправки HEAD запроса, Postman откроет вкладку Headers по умолчанию, вместо вкладки Body.

Результаты тестов (Test results) расположенны на вкладке с таким же названием.

